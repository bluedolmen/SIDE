<?xml version="1.0" encoding="UTF-8"?>
<!-- ====================================================================== 
     16 oct. 08 10:37:04                                                        

     DocBook generation to PDF    
                   
     bch                                                                
     ====================================================================== -->
<project name="DocBook generation" default="default">

	<taskdef resource="net/sf/antcontrib/antcontrib.properties" />

	<!-- ================================= 
          target: default              
         ================================= -->
	<target name="default">
		<antcall target="generatePictures" />
	</target>

	<target name="generatePictures">
		<foreach target="generatePicture" param="file">
			<path>
				<fileset dir="${generated_dir}" includes="*.svg" />
			</path>
		</foreach>
	</target>

	<target name="generatePicture">
		<echo>${file}</echo>
		<exec executable="sh" failifexecutionfails="false">
			<arg line="./build.sh '${file}' '${file}.png'" />
		</exec>
		<exec executable="inkscape" failifexecutionfails="false">
			<arg line="--without-gui --export-png='${file}.png' '${file}'" />
		</exec>
		<delete file="${file}" />
	</target>

</project>