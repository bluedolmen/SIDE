<?xml version="1.0" encoding="UTF-8"?>
<!-- ====================================================================== 
     16 oct. 08 10:37:04                                                        

     DocBook generation to PDF    
                   
     bch                                                                
     ====================================================================== -->
<project name="DocBook generation" default="default">
	
	<taskdef resource="net/sf/antcontrib/antcontrib.properties"/>
	
    <!-- ================================= 
          target: default              
         ================================= -->
    <target name="default">
        <foreach target="convertFile" param="file">
        	<path>
        		<fileset dir="${generated_dir}" includes="*.xml"/>
        	</path>
    	</foreach>
    </target>
	
	<target name="convertFile">
		<replace file="${file}" token="./docbook-4.5/docbookx.dtd" value="../../../external-lib/docbook-4.5/docbookx.dtd"/>
		<exec executable="xsltproc">
			<arg line="--output '${file}.fo' --stringparam fop1.extensions 1  ../../../external-lib/docbook-xsl-1.74.0/fo/docbook.xsl '${file}'"/>
		</exec>
		<exec executable="${generated_dir}/../../../external-lib/fop-0.95/fop">
			<arg line="-fo '${file}.fo' -pdf '${file}.pdf'"/>
		</exec>
		<delete file="${file}"/>
		<delete file="${file}.fo"/>
	</target>

</project>